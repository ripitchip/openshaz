@startuml
!include <archimate/Archimate>

title Multi-Worker Architecture

' ---------------------------
' Container with background color
' ---------------------------

' Use Technology_Node as a container and set background color to light blue
Group(multiWorkerArch, "Multi-Worker Architecture") #FFFFFF {
    Application_Component(inferenceApi, "Inference API")
    Application_Service(taskQueue, "Task Queue")
    Technology_Node(workerA, "Worker A\n2GB / 2vCPU")
    Technology_Node(workerB, "Worker B\n2GB / 2vCPU")
    Business_Object(musicBucket, "Music Bucket")
    Business_Object(embeddingsDB, "Embeddings DB")
}

' ---------------------------
' Relationships
' ---------------------------

Rel_Serving_Up(inferenceApi, musicBucket, "reads audio")
Rel_Serving_Up(inferenceApi, taskQueue, "push task")
Rel_Serving_Up(taskQueue, workerA, "pull task")
Rel_Serving_Up(taskQueue, workerB, "pull task")
Rel_Serving_Up(workerA, embeddingsDB, "write embeddings")
Rel_Serving_Up(workerB, embeddingsDB, "write embeddings")

@enduml

